{"version":3,"file":"Accordion.js","sourceRoot":"","sources":["../src/Accordion.ts"],"names":[],"mappings":"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","sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport customElement from \"@ui5/webcomponents-base/dist/decorators/customElement.js\";\nimport property from \"@ui5/webcomponents-base/dist/decorators/property.js\";\nimport slot from \"@ui5/webcomponents-base/dist/decorators/slot.js\";\nimport event from \"@ui5/webcomponents-base/dist/decorators/event.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport type I18nBundle from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport \"@ui5/webcomponents-icons/dist/feeder-arrow.js\";\n\nimport AccordionTemplate from \"./generated/templates/AccordionTemplate.lit.js\";\n\n// Styles\nimport AccordionCss from \"./generated/themes/Accordion.css.js\";\nimport { COLLAPSE_ALL, EXPAND_ALL } from \"./generated/i18n/i18n-defaults.js\";\n\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n *\n * <h3>Usage</h3>\n *\n * For the <code>udex-accordion</code>\n * <h3>ES6 Module Import</h3>\n *\n * <code>import @udex/web-components/dist/Accordion.js\";</code>\n *\n * @constructor\n * @author SAP SE\n * @alias udex.components.Accordion\n * @extends sap.ui.webc.base.UI5Element\n * @tagname udex-accordion\n * @public\n */\n@customElement({\n  tag: \"udex-accordion\",\n  renderer: litRender,\n  styles: AccordionCss,\n  template: AccordionTemplate,\n  dependencies: [],\n})\n\n/**\n * Triggered when the user click on on Expand/Collapse All button.\n *\n * @event sap.ui.webc.web-components.Accordion#toggleItems\n * @public\n */\n@event(\"toggle-items\", {\n  detail:\n    {\n      isOpen:\n        { type: Boolean },\n    },\n})\nclass Accordion extends UI5Element {\n  /**\n   * Used internally to store expand/collapse button state.\n   *\n   * @type {boolean}\n   * @name sap.ui.webc.web-components.Accordion.prototype.allExpanded\n   * @private\n   */\n  @property({ type: Boolean, noAttribute: true }) _allExpanded!: boolean;\n\n  /**\n   * Defines direction of the accordion component.\n   *\n   * @type {string}\n   * @name sap.ui.webc.udex.Accordion.prototype.direction\n   * @private\n   */\n  @property({ type: String }) _direction?: string;\n\n  /**\n   * Defines the headline text of the accordion component.\n   *\n   * @type {string}\n   * @name sap.ui.webc.udex.Accordion.prototype.headline\n   * @defaultvalue \"\"\n   * @public\n   */\n  @property({ type: String }) headline!: string;\n\n  /**\n   * Slot for accordion items.\n   *\n   * @type {HTMLElement[]}\n   * @name sap.ui.webc.web-components.Accordion.prototype.items\n   * @slot\n   * @public\n   */\n  @slot({ type: HTMLElement, \"default\": true, individualSlots: true }) _items!: Array<HTMLElement>;\n\n  _activeItemIndex: number;\n\n  static i18nBundle: I18nBundle;\n\n  constructor() {\n    super();\n    this._allExpanded = false;\n    this._activeItemIndex = -1;\n  }\n\n  static async onDefine() {\n    Accordion.i18nBundle = await getI18nBundle(\"sap-ui-webcomponents-bundle\");\n  }\n\n  get accordionClass(): string {\n    let classes = \"udex-accordion\";\n    if (this._direction === \"rtl\") {\n      classes = `${classes} udex-accordion--${this._direction}`;\n    }\n\n    return classes;\n  }\n\n  get toggleAllText(): string {\n    return this._allExpanded\n      ? Accordion.i18nBundle.getText(COLLAPSE_ALL)\n      : Accordion.i18nBundle.getText(EXPAND_ALL);\n  }\n\n  get isExpanded(): boolean {\n    return this._allExpanded;\n  }\n\n  get items() {\n    return this._items.map(el => {\n      return {\n        item: el,\n      };\n    });\n  }\n\n  get headlineText() {\n    return this.headline ? this.headline : \"Default headline\";\n  }\n\n  toggleAllHandler(e: Event) {\n    e.preventDefault();\n    this.fireEvent(\"toggle-items\", { isOpen: this._allExpanded });\n    this._allExpanded = !this._allExpanded;\n  }\n\n  keydownHandler(e: KeyboardEvent) {\n    if (e.key !== \"Tab\") {\n      e.preventDefault();\n    }\n    const len = this._items.length;\n    const focusOnItem = (itemIndex: number) => {\n      const item = this._items[itemIndex];\n      this._activeItemIndex = itemIndex;\n      (item?.shadowRoot?.querySelector(\".udex-accordion-item__header\") as HTMLElement)?.focus();\n    };\n\n    switch (e.key) {\n    case \"Home\":\n      focusOnItem(0);\n      break;\n    case \"End\":\n      focusOnItem(len - 1);\n      break;\n    case \"ArrowUp\":\n      if (this._activeItemIndex > 0) {\n        focusOnItem(this._activeItemIndex - 1);\n      } else if (this._activeItemIndex === 0) {\n        focusOnItem(len - 1);\n      }\n      break;\n    case \"ArrowDown\":\n      if (this._activeItemIndex < len - 1) {\n        focusOnItem(this._activeItemIndex + 1);\n      } else if (this._activeItemIndex === len - 1) {\n        focusOnItem(0);\n      }\n      break;\n    default:\n      break;\n    }\n  }\n\n  itemFocusHandler(e: CustomEvent) {\n    const target = e.target as HTMLElement;\n    if (target) {\n      this._activeItemIndex = this._items?.indexOf(target) ?? -1;\n    }\n  }\n\n  onAfterRendering() {\n    const accordion = this.shadowRoot?.querySelector<HTMLElement>(\n      \".udex-accordion\",\n    );\n    if (accordion) {\n      const directionStyles: string = window\n        .getComputedStyle(accordion)\n        .getPropertyValue(\"direction\");\n      if (!directionStyles) {\n        this._direction = \"ltr\";\n      } else {\n        this._direction = directionStyles;\n      }\n    }\n  }\n}\n\nAccordion.define();\n\nexport default Accordion;\n"]}