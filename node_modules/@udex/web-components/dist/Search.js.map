{"version":3,"file":"Search.js","sourceRoot":"","sources":["../src/Search.ts"],"names":[],"mappings":"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","sourcesContent":["import UI5Element, { ChangeInfo } from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport customElement from \"@ui5/webcomponents-base/dist/decorators/customElement.js\";\nimport property from \"@ui5/webcomponents-base/dist/decorators/property.js\";\nimport event from \"@ui5/webcomponents-base/dist/decorators/event.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport ResizeHandler, { ResizeObserverCallback } from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport { getFeature } from \"@ui5/webcomponents-base/dist/FeaturesRegistry.js\";\nimport Popover from \"@ui5/webcomponents/dist/Popover.js\";\nimport {\n  isEnter,\n  isTabNext,\n  isTabPrevious,\n  isUp,\n  isDown,\n  isEscape,\n  isRight,\n  isLeft,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport \"@ui5/webcomponents-icons/dist/decline.js\";\nimport \"@ui5/webcomponents-icons/dist/search.js\";\nimport \"@ui5/webcomponents-icons/dist/microphone.js\";\nimport debounce from \"./utils/debounce.js\";\nimport { SUGGESTED_TEXT, RECOMMENDED_TEXT } from \"./generated/i18n/i18n-defaults.js\";\nimport type SearchInputSuggestion from \"./features/SearchSuggestionsPopover.js\";\n\nimport SearchTemplate from \"./generated/templates/SearchTemplate.lit.js\";\nimport SearchSuggestionsTemplate from \"./generated/templates/SearchSuggestionsTemplate.lit.js\";\n\n// Styles\nimport SearchCss from \"./generated/themes/Search.css.js\";\nimport SearchSuggestionsCss from \"./generated/themes/SearchSuggestions.css.js\";\n\ntype SuggestionRecommendLists = {\n  suggested: Array<string>,\n  recommended: Array<string>\n}\n\nexport type SuggestionList = {\n  handleSelectItem: () => void,\n  text: string\n}\n\nenum Mode {\n  Standard = \"Standard\",\n  HomeSearch = \"Home Search\",\n}\n\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n *\n * <h3>Usage</h3>\n *\n * For the <code>udex-search</code>\n * <h3>ES6 Module Import</h3>\n *\n * <code>import @udex/web-components/dist/Search.js\";</code>\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webc.web-components.Search\n * @extends sap.ui.webc.base.UI5Element\n * @tagname udex-search\n * @public\n */\n@customElement({\n  tag: \"udex-search\",\n  renderer: litRender,\n  styles: SearchCss,\n  template: SearchTemplate,\n  staticAreaStyles: SearchSuggestionsCss,\n  staticAreaTemplate: SearchSuggestionsTemplate,\n  get dependencies() {\n    const Suggestion = getFeature<typeof SearchInputSuggestion>(\"SearchInputSuggestion\");\n    return ([Popover] as Array<typeof UI5Element>).concat(Suggestion ? Suggestion.dependencies : []);\n  },\n})\n\n/**\n * Fired event when the user submitted the value.\n *\n * @event sap.ui.webc.web-components.Search#submitSearchValue\n * @public\n */\n@event(\"submit-search-value\", { detail: { value: { type: String } } })\n/**\n * Fired event when the user typed to search field.\n *\n * @event sap.ui.webc.web-components.Search#handleValueSearch\n */\n@event(\"handle-value-search\", { detail: { value: { type: String } } })\n/**\n * Fired event when the user clicks on the reset button.\n *\n * @event sap.ui.webc.web-components.Search#handleResetValue\n */\n@event(\"handle-value-reset\")\nclass Search extends UI5Element {\n  static i18nBundle: any;\n  _labelActiveClassName = \"udex-search__label--active\";\n  _voiceActiveClassName = \"udex-search__voice-button--active\";\n  _focusActiveClassName = \"udex-search__container--focus\";\n  _handleResizeBound: ResizeObserverCallback;\n  suggestedList!: Array<SuggestionList>;\n  recommendedList!: Array<SuggestionList>;\n  speechRecognition!: any;\n  Suggestion?: SearchInputSuggestion;\n  /**\n   * Defines the value of the component.\n   *\n   * @type {string}\n   * @name sap.ui.webc.web-components.Search.prototype.value\n   * @defaultvalue \"\"\n   * @formEvents input\n   * @formProperty\n   * @public\n   */\n  @property({ type: String })\n    value!: string;\n\n  /**\n   * Defines label text for the input field.\n   *\n   * @type {string}\n   * @name sap.ui.webc.udex.Search.prototype.label\n   * @defaultvalue \"\"\n   * @public\n   */\n  @property({ type: String })\n    label!: string;\n\n  /**\n   * Defines display the reset button for the search field.\n   *\n   * @type {string}\n   * @name sap.ui.webc.udex.Search.property.showResetButton\n   * @defaultvalue false\n   * @public\n   */\n  @property({ type: Boolean, noAttribute: true })\n    showResetButton!: boolean;\n\n  /**\n   * Defines display the submit button for the search field.\n   *\n   * @type {string}\n   * @name sap.ui.webc.udex.Search.property.showSubmitButton\n   * @defaultvalue true\n   * @public\n   */\n  @property({ type: Boolean })\n    showSubmitButton!: boolean;\n\n  /**\n   * Defines display the voice button for the search field.\n   *\n   * @type {string}\n   * @name sap.ui.webc.udex.Search.property.showVoiceButton\n   * @defaultvalue false\n   * @public\n   */\n  @property({ type: Boolean })\n    showVoiceButton!: boolean;\n\n  /**\n   * Defines suggestions and recommended lists for the component.\n   * <br><br>\n   * <b>Note:</b> Structure of the property:\n   * { suggested: [\"string\", string, ...], recommended: [\"string\", \"string\", ...] }\n   *\n   * @type {string}\n   * @name sap.ui.webc.udex.Search.property.suggestionList\n   * @defaultvalue \"\"\n   * @public\n   */\n  @property({ type: String })\n    suggestionList!: string;\n  /**\n   * Width of the search component\n   * @private\n   */\n  @property({ validator: Integer })\n    _searchWidth?: number;\n\n  /**\n   * Defines display the suggestion popover in the component.\n   *\n   * @type {boolean}\n   * @name sap.ui.webc.udex.Search.property.showSuggestedPopover\n   * @defaultvalue false\n   * @public\n   */\n  @property({ type: Boolean })\n    showSuggestedPopover!: boolean;\n\n  /**\n   * Defines the language of voice search.\n   *\n   * @type {string}\n   * @name sap.ui.webc.udex.Search.property.languageVoice\n   * @defaultvalue \"en-US\"\n   * @public\n   */\n  @property({ type: String, defaultValue: \"en-US\" })\n    languageVoice!: string;\n\n  /**\n   * Defines the mode of component.\n   * <br><br>\n   * <b>Note:</b> accepts a string \"Standard\" or \"Home Search\".\n   * @type {string}\n   * @name sap.ui.webc.udex.Search.property.mode\n   * @defaultValue \"Standard\"\n   * @public\n   */\n  @property({ type: String, defaultValue: \"Standard\" })\n    mode!: \"Standard\" | \"Home Search\";\n\n  /**\n   * Defines the inner stored class of the label.\n   *\n   * @type {string}\n   * @defaultvalue \"\"\n   * @private\n   */\n  @property({ type: String, noAttribute: true, defaultValue: \"\" })\n    labelActiveClass!: string;\n\n  /**\n   * Defines the voice active class of the button.\n   *\n   * @type {string}\n   * @defaultvalue \"\"\n   * @private\n   */\n  @property({ type: String, noAttribute: true, defaultValue: \"\" })\n    voiceActiveClass!: string;\n\n  /**\n   * Defines the inner stored value of the classes of the label.\n   *\n   * @type {string}\n   * @defaultvalue \"\"\n   * @private\n   */\n  @property({ type: String, noAttribute: true, defaultValue: \"\" })\n    labelClasses!: string;\n\n  /**\n   * Defines the class of focus on the input field.\n   *\n   * @type {string}\n   * @defaultvalue \"\"\n   * @private\n   */\n  @property({ type: String, noAttribute: true, defaultValue: \"\" })\n    focusClasses!: string;\n\n  /**\n   * Defines the suggestion popover is opened\n   *\n   * @type {boolean}\n   * @defaultvalue false\n   * @private\n   */\n  @property({ type: Boolean, noAttribute: true })\n    open!: boolean;\n\n  constructor() {\n    super();\n    this._handleResizeBound = this._handleResize.bind(this);\n  }\n\n  static async onDefine(): Promise<void> {\n    Search.i18nBundle = await getI18nBundle(\"udex-search\");\n  }\n\n  onEnterDOM(): void {\n    this.initSpeechRecognition();\n    ResizeHandler.register(this, this._handleResizeBound);\n  }\n\n  onExitDOM(): void {\n    ResizeHandler.deregister(this, this._handleResizeBound);\n  }\n\n  initSpeechRecognition(): void {\n    const SpeechRecognition = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition || (window as any).mozSpeechRecognition || (window as any).msSpeechRecognition;\n    this.speechRecognition = new SpeechRecognition();\n    this.speechRecognition.continuous = true;\n    this.speechRecognition.lang = this.languageVoice;\n    this.speechRecognition.interimResults = false;\n    this.speechRecognition.maxAlternatives = 5;\n  }\n\n  onInvalidation(changeInfo: ChangeInfo): void {\n    this.setNewValue(changeInfo);\n    this.setNewSuggestionList(changeInfo);\n  }\n\n  setNewValue(changeInfo: ChangeInfo): void {\n    if (changeInfo.name === \"value\") {\n      this.value = changeInfo.newValue as string;\n      this.setSuggestedRecommendedLists(this.suggestionList);\n    }\n  }\n\n  setNewSuggestionList(changeInfo: ChangeInfo): void {\n    if (changeInfo.name === \"suggestionList\" && !!changeInfo.newValue) {\n      this.setSuggestedRecommendedLists(changeInfo.newValue as string);\n    }\n  }\n\n  setSuggestedRecommendedLists(value: string): void {\n    if (this.value.length > 2 && value.length > 2) {\n      const parsedData: SuggestionRecommendLists = JSON.parse(value);\n      this.suggestedList = this.getListWithSuggestion(parsedData.suggested);\n      this.recommendedList = this.getListWithSuggestion(parsedData.recommended);\n    }\n    if (!value.length) {\n      this.onClosePopover();\n    }\n  }\n\n  getListWithSuggestion(suggestedList: Array<string>): Array<SuggestionList> {\n    return suggestedList?.map(item => ({\n      handleSelectItem: this.handleSelectItem(item),\n      text: this.getTextWithSuggestion(item),\n    }));\n  }\n\n  getTextWithSuggestion(text: string): string {\n    const search = new RegExp(this.value, \"i\");\n    return text.replace(search, \"<b>$&</b>\");\n  }\n\n  handleSelectItem = (itemValue: string) => () => {\n    this.value = itemValue;\n    this.onSubmit();\n  };\n\n  onSubmit(): void {\n    if (this.value.length) {\n      this.onClosePopover();\n      this.fireEvent(\"submit-search-value\", { value: this.value });\n    }\n  }\n\n  handleAraiExpanded() {\n    const value = this.open.toString();\n    this.shadowRoot?.querySelector(\"[udex-id='search-input']\")?.setAttribute(\"aria-expanded\", value);\n  }\n\n  onOpenPopover(): void {\n    if (this.showSuggestedPopover && (this.suggestedList?.length || this.recommendedList?.length)) {\n      this.Suggestion!.open();\n      this.handleClassToRoot();\n      this.handleAraiExpanded();\n    }\n  }\n\n  onClosePopover(): void {\n    if (this.showSuggestedPopover) {\n      this.Suggestion!.close();\n      this.handleClassToRoot();\n      this.handleAraiExpanded();\n    }\n  }\n\n  handleClassToRoot() {\n    const hasAdditionRootClass = !this.shadowRoot?.querySelector(\".udex-search__root\")?.classList.contains(\"udex-search__root--show-popover\");\n\n    if (this.mode === Mode.HomeSearch && hasAdditionRootClass && this.open) {\n      this.shadowRoot?.querySelector(\".udex-search__root\")?.classList.add(\"udex-search__root--show-popover\");\n    } else {\n      this.shadowRoot?.querySelector(\".udex-search__root\")?.classList.remove(\"udex-search__root--show-popover\");\n    }\n  }\n\n  onBeforeRendering(): void {\n    if (this.showSuggestedPopover) {\n      this.enableSuggestions();\n    }\n\n    if (this.value && this.labelActiveClass === \"\") {\n      this.labelActiveClass = this._labelActiveClassName;\n    }\n\n    this.labelClasses = `udex-search__label ${this.labelActiveClass}`;\n  }\n\n  enableSuggestions() {\n    if (this.Suggestion) {\n      return;\n    }\n\n    const Suggestion = getFeature<typeof SearchInputSuggestion>(\"SearchInputSuggestion\");\n\n    if (Suggestion) {\n      this.Suggestion = new Suggestion(this);\n    } else {\n      throw new Error(\"You have to import '@udex/webcomponents/dist/features/SearchInputSuggestions.js' module to use udex-search suggestions\");\n    }\n  }\n\n  onAfterRendering(): void {\n    if (this.showSuggestedPopover) {\n      this.handleOutsideClick();\n    }\n  }\n\n  handleOutsideClick(): void {\n    document.addEventListener(\"mousedown\", (e: MouseEvent) => {\n      const popover = (e.target as HTMLElement).shadowRoot?.querySelector(\"[ui5-popover]\");\n\n      if (e.target !== this && popover !== this.Suggestion?.popover) {\n        this.handleBlur();\n        this.onClosePopover();\n      }\n    });\n  }\n\n  handleBlur(): void {\n    if (this.value) {\n      this.labelActiveClass = this._labelActiveClassName;\n    } else {\n      this.labelActiveClass = \"\";\n    }\n  }\n\n  handleSearchChange(e: InputEvent): void {\n    this.value = (e.target as HTMLInputElement)?.value;\n    this.showResetButton = !!this.value.length;\n    this.handleDebounce();\n  }\n\n  handleDebounce = debounce(() => {\n    this.fireEvent(\"handle-value-search\", { value: this.value });\n    if (this.showSuggestedPopover && this.value.length > 2) {\n      this.onOpenPopover();\n    }\n    if (this.showSuggestedPopover && this.value.length < 2) {\n      this.onClosePopover();\n    }\n  });\n\n  handleKeyDown = (e: KeyboardEvent) => {\n    e.stopPropagation();\n    this.handleEnterKey(e);\n    this.handleTabKey(e);\n    this.handleUpKey(e);\n    this.handleDownKey(e);\n    this.handleEscapeKey(e);\n    this.handleRightKey(e);\n    this.handleLeftKey(e);\n  };\n\n  handleEnterKey(e: KeyboardEvent) {\n    if (isEnter(e) && !this.open) {\n      e.preventDefault();\n      this.onSubmit();\n    }\n    if (isEnter(e) && this.open) {\n      this.Suggestion?.onEnter(e);\n      this.onSubmit();\n    }\n  }\n\n  handleTabKey(e: KeyboardEvent) {\n    if (isTabNext(e) && this.open) {\n      this.Suggestion?.onTab(e);\n    }\n  }\n\n  handleTabPrevious(e: KeyboardEvent) {\n    if (isTabPrevious(e) && this.open) {\n      this.Suggestion?.onTabPrevious(e);\n    }\n  }\n\n  handleUpKey(e: KeyboardEvent) {\n    if (isUp(e) && this.open) {\n      this.Suggestion?.onUp(e);\n    }\n  }\n\n  handleDownKey(e: KeyboardEvent) {\n    if (isDown(e) && this.open) {\n      this.Suggestion?.onDown(e);\n    }\n  }\n\n  handleEscapeKey(e: KeyboardEvent) {\n    if (isEscape(e) && this.open) {\n      this.Suggestion?.onEscape(e);\n      this.handleClassToRoot();\n    }\n  }\n\n  handleRightKey(e: KeyboardEvent) {\n    if (isRight(e) && this.open) {\n      this.Suggestion?.onRight();\n    }\n  }\n\n  handleLeftKey(e: KeyboardEvent) {\n    if (isLeft(e) && this.open) {\n      this.Suggestion?.onLeft();\n    }\n  }\n\n  handleFocus(): void {\n    this.labelActiveClass = this._labelActiveClassName;\n    this.focusClasses = this._focusActiveClassName;\n  }\n\n  handleFocusout(): void {\n    this.focusClasses = \"\";\n  }\n\n  onReset(): void {\n    this.value = \"\";\n    this.showResetButton = false;\n    this.onClosePopover();\n    this.handleBlur();\n    this.fireEvent(\"handle-value-reset\");\n  }\n\n  onVoice(): void {\n    if (this.speechRecognition) {\n      this.onSpeechLaunch();\n      this.onSpeechStart();\n      this.onSpeechResult();\n      this.onSpeechEnd();\n    }\n  }\n\n  onSpeechLaunch(): void {\n    if (!this.voiceActiveClass) {\n      this.speechRecognition.start();\n    } else {\n      this.speechRecognition.stop();\n    }\n  }\n\n  onSpeechStart(): void {\n    this.speechRecognition.onstart = () => {\n      this.voiceActiveClass = this._voiceActiveClassName;\n      (this.shadowRoot?.querySelector(\"[id='search-input']\") as HTMLInputElement)?.focus();\n    };\n  }\n\n  onSpeechResult(): void {\n    this.speechRecognition.onresult = (e: any) => {\n      const last = e.results.length - 1;\n      this.value = e.results[last][0].transcript;\n      this.speechRecognition.stop();\n    };\n  }\n\n  onSpeechEnd(): void {\n    this.speechRecognition.onend = () => {\n      this.voiceActiveClass = \"\";\n      this.onSubmit();\n      this.onShowResetButton();\n    };\n  }\n\n  onShowResetButton(): void {\n    if (this.value) {\n      this.showResetButton = true;\n    }\n  }\n\n  _handleResize() {\n    this._searchWidth = this.offsetWidth;\n  }\n\n  get popoverStyles() {\n    return {\n      \"width\": this._searchWidth ? `${this._searchWidth}px` : \"\",\n    };\n  }\n\n  get isShowResetButton(): boolean {\n    return this.showResetButton && !!this.value.length;\n  }\n\n  get isShowSuggestedList(): boolean {\n    return !!this.suggestedList?.length;\n  }\n\n  get isShowRecommendedList(): boolean {\n    return !!this.recommendedList?.length;\n  }\n\n  get hasPopoverContent(): boolean {\n    return !!(this.suggestedList?.length || this.recommendedList?.length);\n  }\n\n  get isShowSubmitButton(): boolean {\n    return this.showSubmitButton;\n  }\n\n  get suggestedHeading(): string {\n    return Search.i18nBundle.getText(SUGGESTED_TEXT) as string;\n  }\n\n  get recommendedHeading(): string {\n    return Search.i18nBundle.getText(RECOMMENDED_TEXT) as string;\n  }\n\n  get isHomeSearchMode(): boolean {\n    return this.mode === Mode.HomeSearch;\n  }\n\n  get homeSearchPopoverClass(): string {\n    return this.isHomeSearchMode ? \"udex-search-suggestions__root--home\" : \"\";\n  }\n\n  get searchButtonActiveClass(): string {\n    return this.isHomeSearchMode && this.open ? \"udex-search__submit-button--active\" : \"\";\n  }\n\n  get isNotEmptyClass(): string {\n    return this.value.length > 2 || this.focusClasses.length ? \" udex-search__container--has-value\" : \"\";\n  }\n}\n\nSearch.define();\n\nexport default Search;\n"]}